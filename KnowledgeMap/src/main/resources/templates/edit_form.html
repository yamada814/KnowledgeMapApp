<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>word編集</title>
</head>

<body>
	<h1>word編集</h1>
	<p th:if="${word_duplicate} != null" th:text="${word_duplicate}"></p>
	<form th:action="@{/wordDetail/{id}/editConfirm(id=${word.id})}" method="post">
		<table th:object="${wordForm}">
			<tr>
				<th>word</th>
				<td>
					<input type="text" th:field="*{wordName}">
					<span th:errors="*{wordName}"></span>
				</td>
			</tr>
			<tr>
				<th>content</th>
				<td>
					<textarea th:field="*{content}"></textarea>
					<span th:errors="*{content}"></span>
				</td>
			</tr>
			<tr>
				<th>category</th>
				<td>
					<select th:field="*{categoryId}" required>
						<option value="">カテゴリを選択</option>
						<option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}">
						</option>
					</select>
					<span th:errors="*{categoryId}"></span>
					<span>または新しいカテゴリーをつくる<input type="text" th:field="*{categoryName}"></span>
					<span th:errors="*{categoryNotNull}"></span>
				</td>
			</tr>
			<tr>
				<th>related_words</th>
				<td>
					<ul>
						<li th:each="relatedWordName : ${relatedWordNames}" th:text="${relatedWordName}"></li>
					</ul>
					<select multiple th:field="*{relatedWordIds}">
					    <option th:each="word : ${wordList}" 
					            th:value="${word.id}" 
					            th:text="${word.wordName}">
					    </option>
					</select>
				</td>
			</tr>
		</table>
		<button type="submit">編集内容確認</button>
	</form>
	<form th:if="${fromRegistConfirm}" th:action="@{/registConfirm}" method="post" th:object="${wordForm}">
		<input type="hidden" th:field="*{wordName}">
		<input type="hidden" th:field="*{content}">
		<input type="hidden" th:field="*{categoryId}">
		<input type="hidden" th:field="*{relatedWordIds}">
		<button>登録確認に戻る</button>
	</form>
	<form th:unless="${fromRegistConfirm}" th:action="@{/wordDetail/{id}(id=${word.id})}">
		<button>wordDetailへ戻る</button>		
	</form>
</body>
</html>